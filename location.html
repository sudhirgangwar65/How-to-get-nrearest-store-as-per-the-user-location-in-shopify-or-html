<div class="store-picker-wrapper">
  <div class="store-picker">
    <div class="location-selector" id="store-picker">
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        aria-describedby="location_icon"
      >
        <path d="M12 2C14.1217 2 16.1566 2.86721 17.6569 4.41084C19.1571 5.95448 20 8.0481 20 10.2311C20 13.7093 17.6246 17.4999 12.9354 21.6433C12.6746 21.8737 12.3422 22.0003 11.9985 22C11.6547 21.9997 11.3225 21.8725 11.0622 21.6416L10.752 21.3647C6.27036 17.3293 4 13.6316 4 10.2311C4 8.0481 4.84285 5.95448 6.34315 4.41084C7.84344 2.86721 9.87827 2 12 2ZM12 3.26633C10.2047 3.26633 8.48291 4.00012 7.21343 5.30627C5.94395 6.61243 5.23077 8.38395 5.23077 10.2311C5.23077 13.1876 7.32144 16.594 11.5602 20.4099L11.8663 20.6826C11.9035 20.7155 11.9509 20.7336 12 20.7336C12.0491 20.7336 12.0965 20.7155 12.1337 20.6826C16.5776 16.7553 18.7692 13.2577 18.7692 10.2311C18.7692 9.3165 18.5941 8.41083 18.254 7.56582C17.9138 6.72081 17.4152 5.95301 16.7866 5.30627C16.158 4.65953 15.4118 4.14651 14.5905 3.79649C13.7692 3.44648 12.8889 3.26633 12 3.26633ZM12 7.06531C12.8161 7.06531 13.5987 7.39885 14.1757 7.99256C14.7527 8.58626 15.0769 9.3915 15.0769 10.2311C15.0769 11.0708 14.7527 11.876 14.1757 12.4697C13.5987 13.0634 12.8161 13.397 12 13.397C11.1839 13.397 10.4013 13.0634 9.82429 12.4697C9.24725 11.876 8.92308 11.0708 8.92308 10.2311C8.92308 9.3915 9.24725 8.58626 9.82429 7.99256C10.4013 7.39885 11.1839 7.06531 12 7.06531ZM12 8.33164C11.5104 8.33164 11.0408 8.53176 10.6946 8.88799C10.3484 9.24421 10.1538 9.72735 10.1538 10.2311C10.1538 10.7349 10.3484 11.2181 10.6946 11.5743C11.0408 11.9305 11.5104 12.1306 12 12.1306C12.4896 12.1306 12.9592 11.9305 13.3054 11.5743C13.6516 11.2181 13.8462 10.7349 13.8462 10.2311C13.8462 9.72735 13.6516 9.24421 13.3054 8.88799C12.9592 8.53176 12.4896 8.33164 12 8.33164Z" fill="black"></path>
      </svg>
      <div class="location-selector-right">
        <button id="openPopupButton">Choose an option</button>
        <p>Please enter an Address</p>
      </div>
    </div>

    <div id="popup" class="popup hidden">
      <div class="popup-content">
        <!-- <span id="closePopup" class="close">&times;</span> -->
        <div id="initialOptions">
          <div class="popup-header">
            <p>Please choose an option</p>
          </div>
          <div class="popup-body">
            <form id="popupForm">
              <label class="option-card">
                <input type="radio" name="option" value="Pickup">
                <div class="option-details">
                  <div>
                    <div class="option-header">Pickup</div>
                    <div class="option-description">
                      Order online and collect your order from a Greenheart location.
                    </div>
                  </div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="36" height="24" viewBox="0 0 36 24">
                    <g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><g><path d="M33.309 0c.298 0 .54.245.54.547l-.001 22.35h1.612c.298 0 .54.246.54.548 0 .277-.203.506-.466.543l-.074.005H15.753l-.088.007H6.829c-.03 0-.06-.002-.088-.007H.54c-.298 0-.54-.245-.54-.548 0-.277.203-.506.466-.542l.074-.005 1.611-.001V.547c0-.272.196-.497.453-.54L2.69 0zm-.54 1.094H3.23v21.803H6.29V6.167c0-.271.196-.497.452-.54l.088-.007h8.836c.298 0 .54.246.54.548l-.001 16.729h16.564V1.094zm-17.644 5.62H7.368l-.001 16.183h7.757V6.715zm-6.382 5.9c.273 0 .499.205.535.472l.004.075v3.255c0 .302-.241.548-.54.548-.272 0-.498-.206-.534-.474l-.005-.074v-3.255c0-.303.242-.548.54-.548zm13.666-6.465c1.911-.806 4.113-.363 5.578 1.12 1.465 1.484 1.904 3.717 1.112 5.657-.791 1.94-2.657 3.205-4.727 3.205-2.823 0-5.112-2.319-5.116-5.182-.003-2.1 1.241-3.994 3.153-4.8zM26.444 7c.151.504.525 2.153-.799 3.066-1.065.6-1.641 1.817-1.439 3.036 0 0 .633-2.46 2.245-2.978.747-.241 1.564-.073 2.159.445.047.057.047.14 0 .197-.43.506-1.007.86-1.648 1.008-1.007.255-2.015.335-2.446 1.715.6.007 1.187-.166 1.69-.496.936-.599 1.31-1 2.426-.898.098-.374.148-.76.15-1.146.004-1.655-.897-3.175-2.338-3.949zm-1.59-.49h-.784c.14.877-.236 1.757-.965 2.25-.76.643-1.848.7-2.67.138-.628 1.257-.628 2.743 0 4 .795-.132 1.609-.05 2.36.24.332.145.677.255 1.03.33 0 0 .043-.687-1.08-.979l-.28-.073c-1.022-.273-1.978-.623-2.202-2.175-.008-.054.007-.109.041-.15.035-.043.085-.068.139-.07 1.51.054 2.834 1.042 3.332 2.49 0 0-.052-.276-.105-.574l-.04-.224-.035-.21c-.359-1.922.584-3.853 2.31-4.73-.34-.127-.692-.215-1.051-.262z" transform="translate(-258 -312) translate(258 312)"></path></g></g></g>
                  </svg>
                </div>
              </label>
              <label class="option-card">
                <input type="radio" name="option" value="Local Delivery">
                <div class="option-details">
                  <div>
                    <div class="option-header">Local Delivery</div>
                    <div class="option-description">Live near a Greenheart? We'll come to you!</div>
                  </div>
                  <svg xmlns="http://www.w3.org/2000/svg" width="40" height="24" viewBox="0 0 40 24">
                    <g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><g transform="translate(-221 -456) translate(221 456)"><path d="M14.545 18.9c0 .453.371.82.829.82h9.252c.458 0 .829-.367.829-.82 0-.453-.371-.82-.829-.82h-9.252c-.458 0-.829.367-.829.82zM19.474 12.922c.457 0 .828-.367.828-.82 0-.452-.37-.82-.828-.82h-2.957c-.458 0-.828.368-.828.82 0 .453.37.82.828.82h2.957z"></path> <path d="M3.47 19.72h1.5c.457 0 .828-.367.828-.82 0-.453-.37-.82-.828-.82h-1.5c-.26 0-.511-.103-.696-.286-.185-.183-.289-.431-.289-.69v-5.01c-.002-.48.35-.89.828-.967l2.104-.566c1.144-.162 2.048-1.043 2.228-2.173l.97-5.928c.073-.473.485-.822.969-.82h16.334c.453 0 .848.304.961.738l1.491 5.92c.256 1.03 1.119 1.802 2.179 1.951l6.121.878c.48.076.83.487.828.967v5.01c0 .259-.103.507-.288.69-.185.183-.436.286-.697.286h-.945c-.457 0-.828.367-.828.82 0 .453.371.82.828.82h.961c1.46 0 2.643-1.171 2.643-2.616v-5.01c-.003-1.298-.964-2.4-2.262-2.59l-6.121-.878c-.403-.048-.734-.339-.828-.73L28.47 1.984C28.175.824 27.126.01 25.918 0H9.584c-1.3 0-2.406.935-2.61 2.206l-.952 5.928c-.067.422-.402.754-.828.82L3.09 9.51C1.793 9.698.83 10.797.828 12.094v5.01c0 .694.279 1.36.774 1.85.496.49 1.168.766 1.869.766z"></path> <path d="M10.023 20.327c.347 0 .63-.28.63-.624s-.283-.623-.63-.623c-.348 0-.63.28-.63.623 0 .345.282.624.63.624z"></path> <circle cx="30.259" cy="19.662" r="1"></circle> <path d="M26.142 8.864l-1.292-4.69c-.103-.366-.446-.613-.828-.599h-7.853c-.457 0-.828.367-.828.82v4.69c0 .453.37.82.828.82h9.178c.26 0 .506-.121.663-.328.153-.204.202-.468.132-.713zm-9.112-.599v-3.05h6.395l.828 3.05H17.03zM39.172 22.393h-6.089c1.213-1.255 1.433-3.155.54-4.649-.895-1.494-2.685-2.215-4.379-1.764-1.694.45-2.877 1.963-2.895 3.699 0 1.009.405 1.977 1.127 2.69h-14.62c1.089-1.116 1.4-2.767.79-4.196-.61-1.43-2.023-2.36-3.59-2.364-1.043 0-2.044.41-2.783 1.14-.736.708-1.157 1.677-1.167 2.693-.011 1.016.388 1.995 1.109 2.718H.828c-.457 0-.828.367-.828.82 0 .453.37.82.828.82h38.344c.457 0 .828-.367.828-.82 0-.453-.37-.82-.828-.82v.033zM30.3 17.219c1.373 0 2.485 1.101 2.485 2.46 0 1.358-1.112 2.46-2.485 2.46-1.372 0-2.485-1.102-2.485-2.46 0-1.359 1.113-2.46 2.485-2.46zm-20.244 0c1.372 0 2.485 1.101 2.485 2.46 0 1.358-1.113 2.46-2.485 2.46-1.373 0-2.485-1.102-2.485-2.46 0-1.359 1.112-2.46 2.485-2.46z"></path></g></g></g>
                  </svg>
                </div>
              </label>
              <label class="option-card">
                <input type="radio" name="option" value="Nationwide Shipping">
                <div class="option-details">
                  <div>
                    <div class="option-header">Nationwide Shipping</div>
                    <div class="option-description">Not nearby? We'll ship your order to your door.</div>
                  </div>
                  <svg width="33" height="24" xmlns="http://www.w3.org/2000/svg">
                    <g fill="#000" fill-rule="nonzero"><path d="M.601 19.387h2.276a.59.59 0 0 0 .588-.592.59.59 0 0 0-.588-.592H1.182V1.177h18.096v17.026h-6.37a.59.59 0 0 0-.587.592.59.59 0 0 0 .588.592h9.232a.59.59 0 0 0 .588-.592.59.59 0 0 0-.588-.592h-1.695V4.682h6.328l5.044 4.206-.055 9.301h-.957a.59.59 0 0 0-.587.592.59.59 0 0 0 .587.593h1.531a.579.579 0 0 0 .415-.17c.11-.11.173-.26.173-.416l.061-10.168a.628.628 0 0 0-.218-.462l-5.433-4.516a.592.592 0 0 0-.376-.138h-6.52V.592A.587.587 0 0 0 19.86 0H.6A.586.586 0 0 0 0 .592v18.203c.002.16.066.31.179.422a.592.592 0 0 0 .422.17z"></path> <path d="M26.651 6.782H22.75a.579.579 0 0 0-.413.173.588.588 0 0 0-.167.419v6.244a.59.59 0 0 0 .58.592h6.15a.597.597 0 0 0 .588-.592V9.432a.587.587 0 0 0-.198-.434l-2.275-2.065a.565.565 0 0 0-.363-.151zm1.688 6.244h-5.002V7.952H26.4l1.92 1.742.02 3.332z"></path> <circle cx="7.886" cy="20.509" r="1"></circle> <circle cx="26.351" cy="20.509" r="1"></circle> <path d="M32.317 22.623h-3.52a3.26 3.26 0 0 0-.212-4.533 3.202 3.202 0 0 0-4.503.12 3.248 3.248 0 0 0-.964 2.3c0 .779.285 1.531.8 2.113H10.333a3.262 3.262 0 0 0 .503-3.464 3.218 3.218 0 0 0-2.916-1.906 3.234 3.234 0 0 0-2.303.957 3.248 3.248 0 0 0-.963 2.3c.003.78.293 1.533.813 2.113H.683a.686.686 0 0 0-.683.689c0 .38.306.688.683.688h31.634a.686.686 0 0 0 .683-.688.686.686 0 0 0-.683-.689zM7.92 22.582a2.058 2.058 0 0 1-2.05-2.066c0-1.14.918-2.065 2.05-2.065 1.133 0 2.05.925 2.05 2.065 0 1.141-.917 2.066-2.05 2.066zm18.451 0a2.058 2.058 0 0 1-2.05-2.066c0-1.14.918-2.065 2.05-2.065 1.133 0 2.05.925 2.05 2.065 0 1.141-.917 2.066-2.05 2.066zM8.549 6.754l-.034.034a.615.615 0 0 0-.185.427v6.623a.685.685 0 0 0 .684.627h2.596a.685.685 0 0 0 .684-.627V7.243a.608.608 0 0 0-.178-.427l-.04-.034a1.27 1.27 0 0 1-.636-1.198h.177c.08 0 .144-.065.144-.145v-.523a.583.583 0 0 0-.581-.585H9.376c-.32 0-.581.262-.581.585v.495a.145.145 0 0 0 .143.145h.247a1.27 1.27 0 0 1-.636 1.198zm2.35.654c.333 0 .602.271.602.606 0 .334-.27.606-.601.606a.608.608 0 0 1-.413-1.047.599.599 0 0 1 .447-.165H10.9z"></path></g>
                  </svg>
                </div>
              </label>
            </form>
          </div>
          <div class="popup-footer">
            <div class="popup-footer-btn-group">
              <button class="popup-btn-secondary" id="closePopup">Cancel</button>
              <button class="popup-btn-primary" id="submitInitial">Continue</button>
            </div>
          </div>
        </div>
        <div id="storeSelection" class="hidden">
          <div class="popup-header">
            <div class="popup-header-row">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="24" viewBox="0 0 36 24">
                <g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><g><path d="M33.309 0c.298 0 .54.245.54.547l-.001 22.35h1.612c.298 0 .54.246.54.548 0 .277-.203.506-.466.543l-.074.005H15.753l-.088.007H6.829c-.03 0-.06-.002-.088-.007H.54c-.298 0-.54-.245-.54-.548 0-.277.203-.506.466-.542l.074-.005 1.611-.001V.547c0-.272.196-.497.453-.54L2.69 0zm-.54 1.094H3.23v21.803H6.29V6.167c0-.271.196-.497.452-.54l.088-.007h8.836c.298 0 .54.246.54.548l-.001 16.729h16.564V1.094zm-17.644 5.62H7.368l-.001 16.183h7.757V6.715zm-6.382 5.9c.273 0 .499.205.535.472l.004.075v3.255c0 .302-.241.548-.54.548-.272 0-.498-.206-.534-.474l-.005-.074v-3.255c0-.303.242-.548.54-.548zm13.666-6.465c1.911-.806 4.113-.363 5.578 1.12 1.465 1.484 1.904 3.717 1.112 5.657-.791 1.94-2.657 3.205-4.727 3.205-2.823 0-5.112-2.319-5.116-5.182-.003-2.1 1.241-3.994 3.153-4.8zM26.444 7c.151.504.525 2.153-.799 3.066-1.065.6-1.641 1.817-1.439 3.036 0 0 .633-2.46 2.245-2.978.747-.241 1.564-.073 2.159.445.047.057.047.14 0 .197-.43.506-1.007.86-1.648 1.008-1.007.255-2.015.335-2.446 1.715.6.007 1.187-.166 1.69-.496.936-.599 1.31-1 2.426-.898.098-.374.148-.76.15-1.146.004-1.655-.897-3.175-2.338-3.949zm-1.59-.49h-.784c.14.877-.236 1.757-.965 2.25-.76.643-1.848.7-2.67.138-.628 1.257-.628 2.743 0 4 .795-.132 1.609-.05 2.36.24.332.145.677.255 1.03.33 0 0 .043-.687-1.08-.979l-.28-.073c-1.022-.273-1.978-.623-2.202-2.175-.008-.054.007-.109.041-.15.035-.043.085-.068.139-.07 1.51.054 2.834 1.042 3.332 2.49 0 0-.052-.276-.105-.574l-.04-.224-.035-.21c-.359-1.922.584-3.853 2.31-4.73-.34-.127-.692-.215-1.051-.262z" transform="translate(-258 -312) translate(258 312)"></path></g></g></g>
              </svg>
              <p>Please choose a store:</p>
            </div>
          </div>
          <div class="popup-body">
            <form id="storeForm">
              <label class="store-card">
                <input type="radio" name="store" value="ALDIE" data-lat="38.976063" data-lng="-77.643783">
                <div class="store-details">
                  <div class="store-header">ALDIE</div>
                  <div class="store-address">39333 Little River Turnpike, VA 20105</div>
                  <div class="store-availability">All your products are available at this location.</div>
                </div>
              </label>
              <label class="store-card">
                <input type="radio" name="store" value="BALLSTON" data-lat="38.8802634" data-lng="-77.1126795">
                <div class="store-details">
                  <div class="store-header">BALLSTON</div>
                  <div class="store-address">4121 Wilson Blvd 102C Arlington, VA 22203</div>
                  <div class="store-availability">All your products are available at this location.</div>
                </div>
              </label>
              <label class="store-card">
                <input type="radio" name="store" value="COURTHOUSE" data-lat="38.8920458" data-lng="-77.0826278">
                <div class="store-details">
                  <div class="store-header">COURTHOUSE</div>
                  <div class="store-address">2016 Wilson Blvd Arlington, VA 22201</div>
                  <div class="store-availability">All your products are available at this location.</div>
                </div>
              </label>
              <label class="store-card">
                <input type="radio" name="store" value="LEEDSBURG" data-lat="38.9856697" data-lng="-77.5886315">
                <div class="store-details">
                  <div class="store-header">LEEDSBURG</div>
                  <div class="store-address">212A Loudoun St SE Leesburg, VA 20175</div>
                  <div class="store-availability">All your products are available at this location.</div>
                </div>
              </label>
              <label class="store-card">
                <input type="radio" name="store" value="VIENNA" data-lat="38.9033808" data-lng="-77.2661666">
                <div class="store-details">
                  <div class="store-header">VIENNA</div>
                  <div class="store-address">208 Dominion Road NE, Vienna, VA 22180</div>
                  <div class="store-availability">All your products are available at this location.</div>
                </div>
              </label>
              <label class="store-card">
                <input type="radio" name="store" value="WESTERN MARKET" data-lat="38.9005163" data-lng="-77.0481163">
                <div class="store-details">
                  <div class="store-header">WESTERN MARKET</div>
                  <div class="store-address">2000 Pennsylvania Ave NW Washington, DC 20006</div>
                  <div class="store-availability">All your products are available at this location.</div>
                </div>
              </label>
            </form>
          </div>
          <div class="popup-footer">
            <div class="popup-footer-btn-group">
              <button class="popup-btn-secondary backButton">Back</button>
              <button class="popup-btn-primary" id="submitPickup">Continue</button>
            </div>
          </div>
        </div>
        <div id="localDelivery" class="hidden">
          <div class="popup-header">
            <div class="popup-header-row">
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="24" viewBox="0 0 40 24">
                <g fill="none" fill-rule="evenodd"><g fill="#000" fill-rule="nonzero"><g transform="translate(-221 -456) translate(221 456)"><path d="M14.545 18.9c0 .453.371.82.829.82h9.252c.458 0 .829-.367.829-.82 0-.453-.371-.82-.829-.82h-9.252c-.458 0-.829.367-.829.82zM19.474 12.922c.457 0 .828-.367.828-.82 0-.452-.37-.82-.828-.82h-2.957c-.458 0-.828.368-.828.82 0 .453.37.82.828.82h2.957z"></path> <path d="M3.47 19.72h1.5c.457 0 .828-.367.828-.82 0-.453-.37-.82-.828-.82h-1.5c-.26 0-.511-.103-.696-.286-.185-.183-.289-.431-.289-.69v-5.01c-.002-.48.35-.89.828-.967l2.104-.566c1.144-.162 2.048-1.043 2.228-2.173l.97-5.928c.073-.473.485-.822.969-.82h16.334c.453 0 .848.304.961.738l1.491 5.92c.256 1.03 1.119 1.802 2.179 1.951l6.121.878c.48.076.83.487.828.967v5.01c0 .259-.103.507-.288.69-.185.183-.436.286-.697.286h-.945c-.457 0-.828.367-.828.82 0 .453.371.82.828.82h.961c1.46 0 2.643-1.171 2.643-2.616v-5.01c-.003-1.298-.964-2.4-2.262-2.59l-6.121-.878c-.403-.048-.734-.339-.828-.73L28.47 1.984C28.175.824 27.126.01 25.918 0H9.584c-1.3 0-2.406.935-2.61 2.206l-.952 5.928c-.067.422-.402.754-.828.82L3.09 9.51C1.793 9.698.83 10.797.828 12.094v5.01c0 .694.279 1.36.774 1.85.496.49 1.168.766 1.869.766z"></path> <path d="M10.023 20.327c.347 0 .63-.28.63-.624s-.283-.623-.63-.623c-.348 0-.63.28-.63.623 0 .345.282.624.63.624z"></path> <circle cx="30.259" cy="19.662" r="1"></circle> <path d="M26.142 8.864l-1.292-4.69c-.103-.366-.446-.613-.828-.599h-7.853c-.457 0-.828.367-.828.82v4.69c0 .453.37.82.828.82h9.178c.26 0 .506-.121.663-.328.153-.204.202-.468.132-.713zm-9.112-.599v-3.05h6.395l.828 3.05H17.03zM39.172 22.393h-6.089c1.213-1.255 1.433-3.155.54-4.649-.895-1.494-2.685-2.215-4.379-1.764-1.694.45-2.877 1.963-2.895 3.699 0 1.009.405 1.977 1.127 2.69h-14.62c1.089-1.116 1.4-2.767.79-4.196-.61-1.43-2.023-2.36-3.59-2.364-1.043 0-2.044.41-2.783 1.14-.736.708-1.157 1.677-1.167 2.693-.011 1.016.388 1.995 1.109 2.718H.828c-.457 0-.828.367-.828.82 0 .453.37.82.828.82h38.344c.457 0 .828-.367.828-.82 0-.453-.37-.82-.828-.82v.033zM30.3 17.219c1.373 0 2.485 1.101 2.485 2.46 0 1.358-1.112 2.46-2.485 2.46-1.372 0-2.485-1.102-2.485-2.46 0-1.359 1.113-2.46 2.485-2.46zm-20.244 0c1.372 0 2.485 1.101 2.485 2.46 0 1.358-1.113 2.46-2.485 2.46-1.373 0-2.485-1.102-2.485-2.46 0-1.359 1.112-2.46 2.485-2.46z"></path></g></g></g>
              </svg>
              <p>Add Delivery Address</p>
            </div>
          </div>
          <div class="popup-body">
            <form>
              <div class="popup-body-row">
                <div class="popup-form-group">
                  <label>First Name</label>
                  <input type="text" class="popup-form-control" name="first-name">
                </div>
                <div class="popup-form-group">
                  <label>Last Name</label>
                  <input type="text" class="popup-form-control" name="last-name">
                </div>
                <div class="popup-form-group popup-form-group-full-width">
                  <label>Phone Number</label>
                  <input type="number" class="popup-form-control" name="phone-number">
                </div>
                <div class="popup-form-group popup-form-group-full-width">
                  <label>Street Address</label>
                  <input type="text" class="popup-form-control" name="street-address">
                </div>
                <div class="popup-form-group popup-form-group-full-width">
                  <label>Suite/Apt <span>Optional</span></label>
                  <input type="text" class="popup-form-control" name="Suite-apt">
                </div>
                <div class="popup-form-group ">
                  <label>State</label>
                  <select class="popup-form-control">
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AS">American Samoa</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District of Columbia</option>
                    <option value="FM">Federated States of Micronesia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="GU">Guam</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MH">Marshall Islands</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="MP">Northern Mariana Islands</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PW">Palau</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="PR">Puerto Rico</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VI">Virgin Islands</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                  </select>
                </div>
                <div class="popup-form-group ">
                  <label>ZIP Code</label>
                  <input type="text" class="popup-form-control" name="zip-code">
                </div>
              </div>
            </form>
          </div>
          <div class="popup-footer">
            <div class="popup-footer-btn-group">
              <button class="popup-btn-secondary backButton">Back</button>
              <button class="popup-btn-primary" id="submitLocalPickup">Continue</button>
            </div>
          </div>
        </div>
        <div id="nationwideShipping" class="hidden">
          <div class="popup-header">
            <div class="popup-header-row">
              <svg width="33" height="24" xmlns="http://www.w3.org/2000/svg">
                <g fill="#000" fill-rule="nonzero"><path d="M.601 19.387h2.276a.59.59 0 0 0 .588-.592.59.59 0 0 0-.588-.592H1.182V1.177h18.096v17.026h-6.37a.59.59 0 0 0-.587.592.59.59 0 0 0 .588.592h9.232a.59.59 0 0 0 .588-.592.59.59 0 0 0-.588-.592h-1.695V4.682h6.328l5.044 4.206-.055 9.301h-.957a.59.59 0 0 0-.587.592.59.59 0 0 0 .587.593h1.531a.579.579 0 0 0 .415-.17c.11-.11.173-.26.173-.416l.061-10.168a.628.628 0 0 0-.218-.462l-5.433-4.516a.592.592 0 0 0-.376-.138h-6.52V.592A.587.587 0 0 0 19.86 0H.6A.586.586 0 0 0 0 .592v18.203c.002.16.066.31.179.422a.592.592 0 0 0 .422.17z"></path> <path d="M26.651 6.782H22.75a.579.579 0 0 0-.413.173.588.588 0 0 0-.167.419v6.244a.59.59 0 0 0 .58.592h6.15a.597.597 0 0 0 .588-.592V9.432a.587.587 0 0 0-.198-.434l-2.275-2.065a.565.565 0 0 0-.363-.151zm1.688 6.244h-5.002V7.952H26.4l1.92 1.742.02 3.332z"></path> <circle cx="7.886" cy="20.509" r="1"></circle> <circle cx="26.351" cy="20.509" r="1"></circle> <path d="M32.317 22.623h-3.52a3.26 3.26 0 0 0-.212-4.533 3.202 3.202 0 0 0-4.503.12 3.248 3.248 0 0 0-.964 2.3c0 .779.285 1.531.8 2.113H10.333a3.262 3.262 0 0 0 .503-3.464 3.218 3.218 0 0 0-2.916-1.906 3.234 3.234 0 0 0-2.303.957 3.248 3.248 0 0 0-.963 2.3c.003.78.293 1.533.813 2.113H.683a.686.686 0 0 0-.683.689c0 .38.306.688.683.688h31.634a.686.686 0 0 0 .683-.688.686.686 0 0 0-.683-.689zM7.92 22.582a2.058 2.058 0 0 1-2.05-2.066c0-1.14.918-2.065 2.05-2.065 1.133 0 2.05.925 2.05 2.065 0 1.141-.917 2.066-2.05 2.066zm18.451 0a2.058 2.058 0 0 1-2.05-2.066c0-1.14.918-2.065 2.05-2.065 1.133 0 2.05.925 2.05 2.065 0 1.141-.917 2.066-2.05 2.066zM8.549 6.754l-.034.034a.615.615 0 0 0-.185.427v6.623a.685.685 0 0 0 .684.627h2.596a.685.685 0 0 0 .684-.627V7.243a.608.608 0 0 0-.178-.427l-.04-.034a1.27 1.27 0 0 1-.636-1.198h.177c.08 0 .144-.065.144-.145v-.523a.583.583 0 0 0-.581-.585H9.376c-.32 0-.581.262-.581.585v.495a.145.145 0 0 0 .143.145h.247a1.27 1.27 0 0 1-.636 1.198zm2.35.654c.333 0 .602.271.602.606 0 .334-.27.606-.601.606a.608.608 0 0 1-.413-1.047.599.599 0 0 1 .447-.165H10.9z"></path></g>
              </svg>
              <p>Add Shipping Address</p>
            </div>
          </div>
          <div class="popup-body">
            <form>
              <div class="popup-body-row">
                <div class="popup-form-group">
                  <label>First Name</label>
                  <input type="text" class="popup-form-control" name="first-name">
                </div>
                <div class="popup-form-group">
                  <label>Last Name</label>
                  <input type="text" class="popup-form-control" name="last-name">
                </div>
                <div class="popup-form-group popup-form-group-full-width">
                  <label>Phone Number</label>
                  <input type="number" class="popup-form-control" name="phone-number">
                </div>
                <div class="popup-form-group popup-form-group-full-width">
                  <label>Street Address</label>
                  <input type="text" class="popup-form-control" name="street-address">
                </div>
                <div class="popup-form-group popup-form-group-full-width">
                  <label>Suite/Apt <span>Optional</span></label>
                  <input type="text" class="popup-form-control" name="Suite-apt">
                </div>
                <div class="popup-form-group popup-form-group-full-width">
                  <label>City</label>
                  <input type="text" class="popup-form-control" name="city">
                </div>
                <div class="popup-form-group ">
                  <label>State</label>
                  <select class="popup-form-control">
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AS">American Samoa</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="DC">District of Columbia</option>
                    <option value="FM">Federated States of Micronesia</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="GU">Guam</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MH">Marshall Islands</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="MP">Northern Mariana Islands</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PW">Palau</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="PR">Puerto Rico</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VI">Virgin Islands</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                  </select>
                </div>
                <div class="popup-form-group">
                  <label>ZIP Code</label>
                  <input type="text" class="popup-form-control" name="zip-code">
                </div>
              </div>
            </form>
          </div>
          <div class="popup-footer">
            <div class="popup-footer-btn-group">
              <button class="popup-btn-secondary backButton">Back</button>
              <button class="popup-btn-primary" id="submitNationwidePickup">Continue</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
    .hidden {
      display: none;
    }
    .popup {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .popup-content {
      background: #fff;
      border-radius: 20px;
      text-align: center;
      position: relative;
      max-width: 700px;
      max-height: 700px;
      width: 100%;
      margin: 0 16px;
  }
    .close {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
    }
    .option-card, .store-card {
      display: flex;
      align-items: flex-start;
      padding: 10px;
      border-radius: 5px;
      margin-bottom: 10px;
      background-color: #f8f5ef;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .option-card:hover, .store-card:hover {
      background-color: #f1f1f1;
    }
    .option-card input, .store-card input {
      margin-right: 15px;
      width: 20px;
      height: 20px;
    }
    .option-details {
      flex-grow: 1;
      display:flex;
      justify-content:space-between;
    }
    .option-header, .store-header {
      font-size: 16px;
      font-weight: bold;
      text-align:left;
    }
    .option-description, .store-address, .store-availability {
      font-size: 14px;
      color: #696969;
      text-align:left;
      line-height:1.4;
    }

    .store-availability{
      color:green;
    }

    .option-icon {
      font-size: 24px;
      margin-left: 15px;
    }
    .backButton {
      margin-right: 10px;
    }

    .store-picker-wrapper button#openPopupButton {
      font-size: 15px;
      border: none;
      font-weight: 400;
      font-family: Bicyclette,sans-serif;
      background: none;
      color: #fff;
      padding:0;
      display:block;

    }

      .store-picker-wrapper p {
      font-size: 13px;
      font-family: Bicyclette,sans-serif;
      margin: 0;
      line-height: 1.1;
      color: #fff;
      font-weight: 300;
      text-decoration: underline;
      margin-top:4px;
    }

    .location-selector {
      display: flex;
      border-radius: 50px;
      padding: 20px 15px;
      align-items: center;
      gap:8px;
      cursor:pointer;
    }

    .location-selector svg path {
        fill: #fff;
    }

    .popup-header{
       padding: 32px 32px 24px 32px;
      border-bottom: 1px solid #c3c1c1;
    }

    .popup-header p {
      font-size: 26px;
      text-align: left;
      font-weight: 500;
      color: #000;
      line-height: 34px;
      font-family: Bicyclette,sans-serif;
      margin: 0;
      text-decoration:none;
    }

    .popup-footer {
      padding: 24px 32px 32px 32px;
      border-top: 1px solid #e1e1e1;
    }

    .popup-footer-btn-group {
      display: flex;
      justify-content: end;
      gap: 24px;
    }

    .popup-btn-secondary, .popup-btn-primary {
      height: 48px;
      border-radius: 50px;
      display: flex;
      padding: 0 24px;
      align-items: center;
      justify-content: center;
      font-size:16px;
      cursor:pointer;
    }

    .popup-btn-primary {
      background-color:#000;
      font-weight:700;
      color:#fff;

    }

    .popup-btn-secondary {
      background-color:#fff;
      font-weight:700;
    }

    .popup-body {
      overflow-y: auto;
      padding: 24px 32px 16px;
      max-height:500px;
  }

    .popup-body-row {
      display: flex;
      flex-wrap: wrap;
      margin: 0 -16px;
  }

    .popup-form-group {
      width: 50%;
      display: flex;
      flex-direction: column;
      align-items: baseline;
      padding: 0 16px;
  }

    .popup-form-group label {
      font-size: 16px;
      color:#000;
      font-weight: 500;
  }

      .popup-form-control {
        width: 100%;
        padding: 12px 16px;
        border-radius: 10px;
        border: 1px solid #000;
        margin-bottom: 16px;
        line-height:22px;
        height:48px;
    }
    .popup-form-group-full-width {
      width: 100%;
  }

    .option-details svg{
      flex-shrink:0;
    }

    .popup-header-row {
      display: flex;
      gap: 16px;
  }

    .popup-header-row svg{
      flex-shring:0;
  }

    @media(max-width:767px){
      .popup-body {
        max-height: 450px;
        padding:20px;
      }

      .popup-header{
        padding:20px;
      }

      .popup-header p {
        font-size:24px;
      }

      .popup-footer{
        padding:20px;
      }

      .location-selector{
        padding:4px;
      }

      .store-picker-wrapper button#openPopupButton{
        font-size:14px;
      }

    }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
  // Select by default location as per the user location
    const savedLocation = sessionStorage.getItem('savedLocation');
    if (savedLocation) {
        document.querySelector(`input[value="${savedLocation}"]`).checked = true;
    } else if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(selectNearestLocation, showError);
        //window.location.reload();
    } else {
        alert("Geolocation is not supported by this browser.");
    }

    // Save the selected location when a radio button is clicked
    const locations = document.querySelectorAll('input[name="store"]');
    locations.forEach(location => {
        location.addEventListener('change', () => {
            sessionStorage.setItem('savedLocation', location.value);
          let selectedStore = storeForm.querySelector('input[name="store"]:checked').value;
          document.querySelector(".store-picker-wrapper p").textContent = selectedStore;
        });
    }); 

  // Get the nearest Location
    
  function selectNearestLocation(position) {
    const userLat = position.coords.latitude;
    const userLng = position.coords.longitude;
    if(userLat){
      setTimeout(() =>{
         window.location.reload();
      }, 1000);     
    }

    const locations = document.querySelectorAll('input[name="store"]');
    let minDistance = Infinity;
    let nearestLocation = null;

    locations.forEach(location => {
        const locationLat = parseFloat(location.getAttribute('data-lat'));
        const locationLng = parseFloat(location.getAttribute('data-lng'));
        const distance = calculateDistance(userLat, userLng, locationLat, locationLng);
        
        if (distance < minDistance) {
            minDistance = distance;
            nearestLocation = location;
        }
    });

    if (nearestLocation) {
        nearestLocation.checked = true;
        sessionStorage.setItem('savedLocation', nearestLocation.value);
    }
}
    
//Calculate the distance
function calculateDistance(lat1, lon1, lat2, lon2) {
    const R = 6371; // Radius of the earth in km
    const dLat = deg2rad(lat2 - lat1);
    const dLon = deg2rad(lat2 - lon1);
    const a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
        Math.sin(dLon/2) * Math.sin(dLon/2)
        ; 
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    const distance = R * c; // Distance in km
    return distance;
}

  function deg2rad(deg) {
      return deg * (Math.PI/180);
  }

  //Show Error message for every case
function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            alert("User denied the request for Geolocation.");
            break;
        case error.POSITION_UNAVAILABLE:
            alert("Location information is unavailable.");
            break;
        case error.TIMEOUT:
            alert("The request to get user location timed out.");
            break;
        case error.UNKNOWN_ERROR:
            alert("An unknown error occurred.");
            break;
    }
}

  //End
    
  //Select The default delivery option
    function setDefaultRadioButton() {
        const storedValue = sessionStorage.getItem('selectedOption');
        console.log(storedValue);
          if (storedValue) {
              document.querySelector(`input[value="${storedValue}"]`).checked = true;
          } else {
              document.querySelector('input[value="Pickup"]').checked = true;
          }
      }
  // Function to store the selected radio button value in sessionStorage
      function storeSelectedOption(event) {
          sessionStorage.setItem('selectedOption', event.target.value);
      }
  // Add event listeners to all radio buttons
      document.querySelectorAll('input[name="option"]').forEach(radio => {
          radio.addEventListener('change', storeSelectedOption);
      });   
    
  //End
    
    var openPopupButton = document.getElementById('openPopupButton');
    var $locationSelector = document.getElementById('store-picker');
    var popup = document.getElementById('popup');
    var closePopup = document.getElementById('closePopup');
    var initialOptions = document.getElementById('initialOptions');
    var storeSelection = document.getElementById('storeSelection');
    var popupForm = document.getElementById('popupForm');
    var storeForm = document.getElementById('storeForm');
    var backButton = document.getElementsByClassName('backButton');
    var selectedOption;
    var $submitInitial = document.getElementById('submitInitial');
    var $localDelivery = document.getElementById('localDelivery');
    var $naitonwideDelivery = document.getElementById('nationwideShipping');
    var $submitPickup = document.getElementById('submitPickup');

    $locationSelector.addEventListener('click', function() {
      popup.classList.remove('hidden');
      setDefaultRadioButton();
    });

    closePopup.addEventListener('click', function() {
      popup.classList.add('hidden');
    });

    Array.from(backButton).forEach(function(button){
        button.addEventListener("click", function(){
            storeSelection.classList.add('hidden');
            $localDelivery.classList.add('hidden');
            $naitonwideDelivery.classList.add('hidden');
           initialOptions.classList.remove('hidden');
        })
    })

    storeForm.addEventListener('submit', function(event) {
      event.preventDefault();
      var selectedStore = document.querySelector('input[name="store"]:checked');
      if (selectedStore) {
        openPopupButton.textContent = selectedStore.value + ' (Pickup)';
        popup.classList.add('hidden');
      } else {
        alert('Please select a store');
      }
    });

    popupForm.addEventListener('submit', function(event) {
      event.preventDefault();
      selectedOption = document.querySelector('input[name="option"]:checked');
      if (selectedOption) {
        if (selectedOption.value !== 'Pickup') {
          openPopupButton.textContent = selectedOption.value;
          popup.classList.add('hidden');
        }
      } else {
        alert('Please select an option');
      }
    });

    // Handle submit initial
    $submitInitial.addEventListener("click", () => {

        let inputs = Array.from(popupForm.getElementsByTagName("input"));

        inputs.forEach(function(item){
          if (item.checked) {

            let itemValue = item.value;

            if(itemValue == "Pickup"){
               initialOptions.classList.add('hidden');
               storeSelection.classList.remove('hidden');
            }
            else if(itemValue == "Local Delivery"){
              initialOptions.classList.add('hidden');
              $localDelivery.classList.remove('hidden');
            }
            else{
               initialOptions.classList.add('hidden');
               $naitonwideDelivery.classList.remove('hidden');
            }

          }

        })


    });

    $submitPickup.addEventListener("click", () => {        
        storeSelection.classList.add('hidden');
        $localDelivery.classList.add('hidden');
        $naitonwideDelivery.classList.add('hidden');
        initialOptions.classList.remove('hidden');
        popup.classList.add('hidden');
       
    })
  // Set the value automaticaly

    let selectedStore = storeForm.querySelector('input[name="store"]:checked').value;
    document.querySelector(".store-picker-wrapper p").textContent = selectedStore;
    document.querySelector(".store-picker-wrapper button#openPopupButton").textContent = 'Pickup at';

    // Allow the location
    // Function to request location and reload page on success
     
  });

  
</script>
